<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CRUDX</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body class="theme-night">

    <div id="drawer" class="drawer">
        <div class="drawer-close" id="btn-close-drawer" title="Close Drawer">âœ•</div>
        
        <h3>Tools</h3>
        <div class="drawer-item" id="btn-inject">ğŸš€ Inject Test Data</div>
        <div class="drawer-item" id="btn-delete">ğŸ—‘ï¸ Delete All</div>
        <div class="drawer-item" id="btn-export">ğŸ“¥ JSON Export</div>
        
        <h3>Settings</h3>
        <div class="drawer-item" id="btn-drawer-theme">ğŸ¨ Theme</div>
    </div>

    <header>
        <div class="burger-btn" id="btn-burger">â˜°</div>
        <div class="search-container">
            <input type="text" id="main-search" placeholder="Search Key-Value Space..." title="Search Key-Value Space">
        </div>
        <div class="app-actions">
            <span id="btn-theme" title="Toggle Theme">ğŸŒ—</span>
            <span id="btn-share" title="Share">ğŸ”—</span>
            <span id="btn-fullscreen" title="Fullscreen">ğŸ”²</span>
            <span id="btn-print" title="Print">ğŸ–¨ï¸</span>
<div id="user-profile" class="fab" style="display: none; width: 40px; height: 40px; padding: 0; border-radius: 50%; justify-content: center; align-items: center;">
    <span id="user-icon" style="font-size: 20px;">ğŸ‘¤</span>
    <span id="user-email" style="display: none;"></span>
</div>
        </div>
    </header>

    <div id="data-container"></div>

    <div id="main-paginator" title="Paging Navigator">
        <div class="paginator-grip" id="main-grip" title="Drag to move">â‰¡</div>
        
        <button id="btn-first" title="First Page">|&lt;</button>
        <button id="btn-prev" title="Back">&lt;</button>
        <span style="font-size: 0.85em; font-weight:bold;"><span id="current-page">1</span> of <span id="total-pages">1</span></span>
        
        <select id="grid-select" title="Grid Size">
            <option value="1">1x1</option>
            <option value="3" selected>3x3</option>
            <option value="5">5x5</option>
            <option value="7">7x7</option>
            <option value="9">9x9</option>
            <option value="list">List</option>
        </select>
        
        <select title="Sort by">
            <option>Label</option><option>Size</option><option>Created</option>
        </select>
        <button id="btn-order" title="Order">â†‘</button>
        
        <span title="Total Documents" style="color:orange; font-size: 0.9em; font-weight:bold;">ğŸ“ <span id="total-count">0</span></span>
        <span title="Result Set" style="color:#00ff00; font-size: 0.9em; font-weight:bold;">ğŸ¯ <span id="result-count">0</span></span>
        
        <button id="btn-next" title="Forward">&gt;</button>
        <button id="btn-last" title="Last Page">&gt;|</button>
    </div>

<div id="theme-modal" class="modal-overlay">
    <div class="modal-content theme-editor-wide">
        <h3 class="modal-drag-handle">ğŸ¨ Theme Editor</h3>

        <!-- Startup & Edit Theme (volle Breite, wie gewÃ¼nscht) -->
        <div class="theme-selector-row">
            <div class="selector-item">
                <label>STARTUP THEME</label>
                <select id="in-startup" class="compact-select">
                    <option value="night">Night</option>
                    <option value="day">Day</option>
                    <option value="arnold">Arnold</option>
                    <option value="gaga">Gaga</option>
                </select>
            </div>
            <div class="selector-item">
                <label>EDIT THEME</label>
                <select id="in-edit-theme" class="compact-select">
                    <option value="night">Night</option>
                    <option value="day">Day</option>
                    <option value="arnold">Arnold</option>
                    <option value="gaga">Gaga</option>
                </select>
            </div>
        </div>

        <!-- Dreispaltiges Grid fÃ¼r die Einstellungen -->
        <div class="editor-three-col">
            <!-- SPALTE 1: UI-Elemente -->
            <div class="editor-col">
                <!-- Search -->
                <div class="section-card">
                    <div class="section-header">ğŸ” Search</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-search-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-search-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-search-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-search-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-search-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Canvas -->
                <div class="section-card">
                    <div class="section-header">ğŸ–¼ï¸ Canvas</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-canvas-bg" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-canvas-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-canvas-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-canvas-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Card -->
                <div class="section-card">
                    <div class="section-header">ğŸ“‡ Card</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-card-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-card-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-card-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-card-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-card-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Paginator -->
                <div class="section-card">
                    <div class="section-header">ğŸ§­ Paginator</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-navi-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-navi-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-navi-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-navi-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-navi-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Editor (Modal selbst) -->
                <div class="section-card">
                    <div class="section-header">âœï¸ Editor</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-editor-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-editor-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-editor-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-editor-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-editor-blur" class="checkbox-input"></div>
                    </div>
                </div>
            </div>

            <!-- SPALTE 2: Key, Label & Canvas Padding -->
            <div class="editor-col">
                <div class="section-card">
                    <div class="section-header">ğŸ”‘ Key</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-key-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-key-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-key-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-key-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-key-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">ğŸ·ï¸ Label</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-label-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-label-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-label-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-label-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-label-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Canvas Padding -->
                <div class="section-card">
                    <div class="section-header">ğŸ“ Canvas Spacing</div>
                    <div class="spacing-grid">
                        <div class="spacing-item"><label>Padding</label><input type="number" id="in-canvas-padding" class="small-input" min="0" max="50"></div>
                        <div class="spacing-item"><label>Padding Top</label><input type="number" id="in-canvas-padding-top" class="small-input" min="0" max="50"></div>
                    </div>
                </div>
            </div>

            <!-- SPALTE 3: User, System & weitere AbstÃ¤nde -->
            <div class="editor-col">
                <div class="section-card">
                    <div class="section-header">ğŸ‘¤ User</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-user-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-user-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-user-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-user-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-user-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">âš™ï¸ System</div>
                    <div class="color-grid">
                        <div class="color-item"><label>BG</label><input type="color" id="in-sys-bg" class="color-input"></div>
                        <div class="color-item"><label>Text</label><input type="color" id="in-sys-text" class="color-input"></div>
                        <div class="color-item"><label>Border</label><input type="color" id="in-sys-border" class="color-input"></div>
                        <div class="color-item"><label>Opacity</label><input type="number" id="in-sys-opacity" min="0" max="100" step="5" class="small-input"></div>
                        <div class="color-item"><label>Blur</label><input type="checkbox" id="in-sys-blur" class="checkbox-input"></div>
                    </div>
                </div>

                <!-- Card Padding -->
                <div class="section-card">
                    <div class="section-header">ğŸ“ Card Spacing</div>
                    <div class="spacing-grid">
                        <div class="spacing-item"><label>Padding</label><input type="number" id="in-card-padding" class="small-input" min="0" max="50"></div>
                    </div>
                </div>

                <!-- Paginator Position -->
                <div class="section-card">
                    <div class="section-header">ğŸ“ Paginator Position</div>
                    <div class="spacing-grid">
                        <div class="spacing-item"><label>Bottom</label><input type="number" id="in-navi-bottom" class="small-input" min="0" max="100"></div>
                    </div>
                </div>

                <!-- Burger Farbe -->
                <div class="section-card">
                    <div class="section-header">ğŸ” Burger</div>
                    <div class="color-grid" style="grid-template-columns: 1fr;">
                        <div class="color-item"><label>Text</label><input type="color" id="in-burger-text" class="color-input"></div>
                    </div>
                </div>
            </div>
        </div> <!-- Ende editor-three-col -->

        <!-- ACTIONS-LEISTE (volle Breite) -->
        <div class="actions-bar">
            <button id="btn-export-theme" class="action-button-wide">ğŸ“¤ Export Theme</button>
            <button id="btn-close-modal" class="action-button-wide">âŒ Close Editor</button>
        </div>
    </div>
</div>

    <div id="export-modal" class="modal-overlay">
        <div class="modal-content" style="width: 600px;">
            <h3>ğŸ“¤ Theme Export</h3>
            <textarea id="export-area" style="width: 100%; height: 300px; background: #000; color: #00ff00; font-family: monospace; padding: 10px; border: 1px solid #333;"></textarea>
             <div class="modal-actions">
                <button id="btn-copy-buffer">ğŸ“‹ Copy to Clipboard</button>
                <button id="btn-save-json">ğŸ’¾ Save as JSON</button>
                <button id="btn-close-export">Close</button>
            </div>
        </div>
    </div>

    <div id="login-modal" class="modal">
        <div class="modal-content card" style="max-width: 400px; text-align: center;">
            <h3>Authentication Required</h3>
            <p>Please enter your email to receive a secure login link.</p>
            <input type="email" id="login-email" placeholder="yourname@example.com" class="input-field" style="width: 100%; margin: 15px 0;">
            <button id="btn-send-link" class="btn btn-user">Send Login Link</button>
            <div id="login-status" style="margin-top: 10px; font-size: 0.8em;"></div>
        </div>
    </div>

<div id="user-modal" class="user-popup">
    <div class="user-popup-header">
        <span id="btn-close-user" class="close-x" title="Close">âœ•</span>
    </div>
    <div class="user-popup-body">
        <div class="user-avatar-large">ğŸ‘¤</div>
        <h3 id="modal-user-greeting">Hi, Dieter!</h3>
        <p id="modal-user-email" class="user-email-text"></p>
        <button id="btn-logout-confirm" class="btn-logout-action">Sign out from all accounts</button>
    </div>
    <div class="user-popup-footer">
        <a href="#">Privacy Policy</a> â€¢ <a href="#">Terms</a>
    </div>
</div>

    <script id="crudx-settings" type="application/json">
        {}
    </script>

    <script>
        const paginator = document.getElementById('main-paginator');
        const grip = document.getElementById('main-grip');
        let isDragging = false, currentX = 0, currentY = 0, initialX = 0, initialY = 0, xOffset = 0, yOffset = 0;

        grip.addEventListener("mousedown", (e) => {
            initialX = e.clientX - xOffset; initialY = e.clientY - yOffset;
            isDragging = true; document.body.style.userSelect = 'none';
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX; currentY = e.clientY - initialY;
                xOffset = currentX; yOffset = currentY;
                paginator.style.transform = `translate(calc(-50% + ${currentX}px), ${currentY}px)`;
            }
        });

        document.addEventListener("mouseup", () => {
            if (isDragging) { initialX = currentX; initialY = currentY; isDragging = false; document.body.style.userSelect = ''; }
        });
    </script>

    <script type="module" src="./app.js"></script>
</body>
</html>