<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CRUDX</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body class="theme-night">

    <div id="drawer" class="drawer">
        <div class="drawer-close" id="btn-close-drawer" title="Close Drawer">âœ•</div>
        
        <h3>Tools</h3>
        <div class="drawer-item" id="btn-inject">ğŸš€ Inject Test Data</div>
        <div class="drawer-item" id="btn-delete">ğŸ—‘ï¸ Delete All</div>
        <div class="drawer-item" id="btn-export">ğŸ“¥ JSON Export</div>
        
        <h3>Settings</h3>
        <div class="drawer-item" id="btn-drawer-theme">ğŸ¨ Theme</div>
    </div>

    <header>
        <div class="burger-btn" id="btn-burger">â˜°</div>
        <div class="search-container">
            <input type="text" id="main-search" placeholder="Search Key-Value Space...">
        </div>
        <div class="app-actions">
            <span id="btn-theme" title="Toggle Theme">ğŸŒ—</span>
            <span id="btn-share" title="Share">ğŸ”—</span>
            <span id="btn-fullscreen" title="Fullscreen">ğŸ”²</span>
            <span id="btn-print" title="Print">ğŸ–¨ï¸</span>
        </div>
    </header>

    <div id="data-container"></div>

    <div id="main-paginator">
        <div class="paginator-grip" id="main-grip" title="Drag to move">â‰¡</div>
        
        <button id="btn-first" title="First Page">|&lt;</button>
        <button id="btn-prev" title="Back">&lt;</button>
        <span style="font-size: 0.85em; font-weight:bold;">Page <span id="current-page">1</span></span>
        
        <select id="grid-select" title="Grid Size">
            <option value="1">1x1</option>
            <option value="3" selected>3x3</option>
            <option value="5">5x5</option>
            <option value="7">7x7</option>
            <option value="9">9x9</option>
            <option value="list">List View</option>
        </select>
        
        <select title="Sort by">
            <option>Label</option><option>Size</option><option>Created</option>
        </select>
        <button title="Order">â†“</button>
        
        <span title="Total Documents" style="color:orange; font-size: 0.9em; font-weight:bold;">ğŸ“ <span id="total-count">0</span></span>
        <span title="Result Set" style="color:#00ff00; font-size: 0.9em; font-weight:bold;">ğŸ¯ <span id="result-count">0</span></span>
        
        <button id="btn-next" title="Forward">&gt;</button>
        <button id="btn-last" title="Last Page">&gt;|</button>
    </div>

    <div id="theme-modal" class="modal-overlay">
        <div class="modal-content" style="width: 1100px; max-width: 95vw;">
            <h3>ğŸ¨ Theme Editor</h3>
            
            <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div class="color-row" style="flex: 1; margin-bottom: 0;">
                    Startup Theme 
                    <select id="in-startup" style="width: 120px;">
                        <option value="night">Night</option>
                        <option value="day">Day</option>
                        <option value="arnold">Arnold</option>
                        <option value="gaga">Gaga</option>
                    </select>
                </div>
                <div class="color-row" style="flex: 1; margin-bottom: 0;">
                    Editing Theme 
                    <select id="in-edit-theme" style="width: 120px;">
                        <option value="night">Night</option>
                        <option value="day">Day</option>
                        <option value="arnold">Arnold</option>
                        <option value="gaga">Gaga</option>
                    </select>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 40px;">
                <div>
                    <h4>ğŸ–¼ï¸ Canvas</h4>
                    <div class="color-row">Background <input type="color" id="in-canvas-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-canvas-text"></div>
                    <div class="color-row">Lines & Borders <input type="color" id="in-canvas-border"></div>
                    <div class="color-row">Grid Padding <input type="number" id="in-canvas-padding"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-canvas-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-canvas-blur"></div>

                    <h4>ğŸƒ Card</h4>
                    <div class="color-row">Background <input type="color" id="in-card-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-card-text"></div>
                    <div class="color-row">Lines & Borders <input type="color" id="in-card-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-card-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-card-blur"></div>

                    <h4>ğŸ” Burger</h4>
                    <div class="color-row">Foreground <input type="color" id="in-burger-text"></div>
                </div>

                <div>
                    <h4>ğŸ”¢ Pagination Navi</h4>
                    <div class="color-row">Background <input type="color" id="in-navi-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-navi-text"></div>
                    <div class="color-row">Lines & Borders <input type="color" id="in-navi-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-navi-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-navi-blur"></div>
                    <div class="color-row">Padding Bottom <input type="number" id="in-navi-bottom"></div>

                    <h4>ğŸ› ï¸ Themes Editor</h4>
                    <div class="color-row">Background <input type="color" id="in-editor-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-editor-text"></div>
                    <div class="color-row">Lines & Borders <input type="color" id="in-editor-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-editor-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-editor-blur"></div>

                    <h4>ğŸ” Search</h4>
                    <div class="color-row">Background <input type="color" id="in-search-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-search-text"></div>
                    <div class="color-row">Outline <input type="color" id="in-search-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-search-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-search-blur"></div>
                </div>

                <div>
                    <h4>ğŸ·ï¸ Key & Label Tags</h4>
                    <div class="color-row">Background <input type="color" id="in-key-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-key-text"></div>
                    <div class="color-row">Outline <input type="color" id="in-key-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-key-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-key-blur"></div>

                    <h4>ğŸ·ï¸ User Tags</h4>
                    <div class="color-row">Background <input type="color" id="in-user-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-user-text"></div>
                    <div class="color-row">Outline <input type="color" id="in-user-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-user-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-user-blur"></div>

                    <h4>ğŸ·ï¸ System Tags</h4>
                    <div class="color-row">Background <input type="color" id="in-sys-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-sys-text"></div>
                    <div class="color-row">Outline <input type="color" id="in-sys-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-sys-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-sys-blur"></div>

                    <h4>ğŸ·ï¸ MIME Detection Pill</h4>
                    <div class="color-row">Background <input type="color" id="in-mime-bg"></div>
                    <div class="color-row">Foreground <input type="color" id="in-mime-text"></div>
                    <div class="color-row">Outline <input type="color" id="in-mime-border"></div>
                    <div class="color-row">Opacity (%) <input type="number" id="in-mime-opacity"></div>
                    <div class="color-row">Enable Blur <input type="checkbox" id="in-mime-blur"></div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="btn-close-modal">Close</button>
                <button id="btn-export-theme" title="Copy <script> to Clipboard">&lt;/&gt; Export</button>
            </div>
        </div>
    </div>

    <div id="export-modal" class="modal-overlay">
        <div class="modal-content" style="width: 600px;">
            <h3>ğŸ“¤ Theme Export</h3>
            <textarea id="export-area" style="width: 100%; height: 300px; background: #000; color: #00ff00; font-family: monospace; padding: 10px; border: 1px solid #333;"></textarea>
             <div class="modal-actions">
                <button id="btn-copy-buffer">ğŸ“‹ Copy to Clipboard</button>
                <button id="btn-save-json">ğŸ’¾ Save as JSON</button>
                <button id="btn-close-export">Close</button>
            </div>
        </div>
    </div>

    <script id="crudx-settings" type="application/json">
        {}
    </script>

    <script>
        const paginator = document.getElementById('main-paginator');
        const grip = document.getElementById('main-grip');
        let isDragging = false, currentX = 0, currentY = 0, initialX = 0, initialY = 0, xOffset = 0, yOffset = 0;

        grip.addEventListener("mousedown", (e) => {
            initialX = e.clientX - xOffset; initialY = e.clientY - yOffset;
            isDragging = true; document.body.style.userSelect = 'none';
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX; currentY = e.clientY - initialY;
                xOffset = currentX; yOffset = currentY;
                paginator.style.transform = `translate(calc(-50% + ${currentX}px), ${currentY}px)`;
            }
        });

        document.addEventListener("mouseup", () => {
            if (isDragging) { initialX = currentX; initialY = currentY; isDragging = false; document.body.style.userSelect = ''; }
        });
    </script>

    <script type="module" src="./app.js"></script>
</body>
</html>